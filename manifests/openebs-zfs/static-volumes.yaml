---
# === pool/lex (personal photo archive, ~920 GB) ===
apiVersion: zfs.openebs.io/v1
kind: ZFSVolume
metadata:
  name: lex
  namespace: openebs
  finalizers: []
spec:
  capacity: "1099511627776"
  fsType: zfs
  ownerNodeID: k8s-storage-01
  poolName: pool
  volumeType: DATASET
  shared: "no"
status:
  state: Ready
---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: zfs-lex
spec:
  capacity:
    storage: 1Ti
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Retain
  storageClassName: zfs-localpv
  claimRef:
    namespace: samba
    name: samba-lex
  csi:
    driver: zfs.csi.openebs.io
    fsType: zfs
    volumeHandle: lex
    volumeAttributes:
      openebs.io/poolname: pool
  nodeAffinity:
    required:
      nodeSelectorTerms:
        - matchExpressions:
            - key: kubernetes.io/hostname
              operator: In
              values:
                - k8s-storage-01
---
# === pool/dump (general dump, ~823 GB) ===
apiVersion: zfs.openebs.io/v1
kind: ZFSVolume
metadata:
  name: dump
  namespace: openebs
  finalizers: []
spec:
  capacity: "1099511627776"
  fsType: zfs
  ownerNodeID: k8s-storage-01
  poolName: pool
  volumeType: DATASET
  shared: "no"
status:
  state: Ready
---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: zfs-dump
spec:
  capacity:
    storage: 1Ti
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Retain
  storageClassName: zfs-localpv
  claimRef:
    namespace: samba
    name: samba-dump
  csi:
    driver: zfs.csi.openebs.io
    fsType: zfs
    volumeHandle: dump
    volumeAttributes:
      openebs.io/poolname: pool
  nodeAffinity:
    required:
      nodeSelectorTerms:
        - matchExpressions:
            - key: kubernetes.io/hostname
              operator: In
              values:
                - k8s-storage-01
---
# === pool/transmission (torrent downloads, ~2.8 TB, shared between Samba and Transmission) ===
apiVersion: zfs.openebs.io/v1
kind: ZFSVolume
metadata:
  name: transmission
  namespace: openebs
  finalizers: []
spec:
  capacity: "10995116277760"
  fsType: zfs
  ownerNodeID: k8s-storage-01
  poolName: pool
  volumeType: DATASET
  shared: "yes"
status:
  state: Ready
---
# PV for Transmission pod (read-write)
apiVersion: v1
kind: PersistentVolume
metadata:
  name: zfs-transmission
spec:
  capacity:
    storage: 10Ti
  accessModes:
    - ReadWriteMany
  persistentVolumeReclaimPolicy: Retain
  storageClassName: zfs-localpv
  claimRef:
    namespace: transmission-system
    name: transmission-downloads
  csi:
    driver: zfs.csi.openebs.io
    fsType: zfs
    volumeHandle: transmission
    volumeAttributes:
      openebs.io/poolname: pool
  nodeAffinity:
    required:
      nodeSelectorTerms:
        - matchExpressions:
            - key: kubernetes.io/hostname
              operator: In
              values:
                - k8s-storage-01
---
# === pool/papermc-data (Minecraft server, ~7 GB) ===
apiVersion: zfs.openebs.io/v1
kind: ZFSVolume
metadata:
  name: papermc-data
  namespace: openebs
  finalizers: []
spec:
  capacity: "42949672960"
  fsType: zfs
  ownerNodeID: k8s-storage-01
  poolName: pool
  volumeType: DATASET
  shared: "no"
status:
  state: Ready
---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: zfs-papermc-data
spec:
  capacity:
    storage: 40Gi
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Retain
  storageClassName: zfs-localpv
  claimRef:
    namespace: paper
    name: data-papermc-0
  csi:
    driver: zfs.csi.openebs.io
    fsType: zfs
    volumeHandle: papermc-data
    volumeAttributes:
      openebs.io/poolname: pool
  nodeAffinity:
    required:
      nodeSelectorTerms:
        - matchExpressions:
            - key: kubernetes.io/hostname
              operator: In
              values:
                - k8s-storage-01
---
# PV for Samba pod (read-only access to transmission downloads)
apiVersion: v1
kind: PersistentVolume
metadata:
  name: zfs-transmission-samba
spec:
  capacity:
    storage: 10Ti
  accessModes:
    - ReadOnlyMany
  persistentVolumeReclaimPolicy: Retain
  storageClassName: zfs-localpv
  claimRef:
    namespace: samba
    name: samba-transmission
  csi:
    driver: zfs.csi.openebs.io
    fsType: zfs
    volumeHandle: transmission
    volumeAttributes:
      openebs.io/poolname: pool
  nodeAffinity:
    required:
      nodeSelectorTerms:
        - matchExpressions:
            - key: kubernetes.io/hostname
              operator: In
              values:
                - k8s-storage-01
