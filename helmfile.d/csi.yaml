repositories:
  - name: longhorn
    url: https://charts.longhorn.io
  - name: kubernetes-sigs
    url: https://kubernetes-sigs.github.io/nfs-subdir-external-provisioner/

# https://artifacthub.io/packages/helm/longhorn/longhorn
releases:
  - name: longhorn
    namespace: longhorn-system
    installed: true
    chart: longhorn/longhorn
    values:
      - ingress:
          enabled: true
          host: longhorn.k8s.home.lex.la
          annotations:
            traefik.ingress.kubernetes.io/router.entrypoints: "websecure"

        # Minimize the number of replicas to reduce the resource usage.
        # This is not safe for production.
        defaultSetting:
          defaultReplicaCount: 1
        longhornUI:
          replicas: 1
        longhornConversionWebhook:
          replicas: 1
        longhornAdmissionWebhook:
          replicas: 1
        longhornRecoveryBackend:
          replicas: 1
        csi:
          attacherReplicaCount: 1
          provisionerReplicaCount: 1
          resizerReplicaCount: 1
          snapshotterReplicaCount: 1

  - name: nfs-subdir-external-provisioner
    namespace: nfs-subdir-external-provisioner
    installed: true
    chart: kubernetes-sigs/nfs-subdir-external-provisioner
    values:
      - nfs:
          server: "nas.home.lex.la"
          path: "/nfs/k8s"
