---
# Node preparation handlers
# Handlers for restarting services after configuration changes

- name: Restart watchdog service
  ansible.builtin.systemd:
    name: watchdog
    state: started
  listen: restart watchdog

- name: Reload systemd
  ansible.builtin.systemd:
    daemon_reload: true
  listen: reload systemd

- name: Restart open-iscsi service
  ansible.builtin.systemd:
    name: open-iscsi
    state: restarted
  listen: restart open-iscsi

- name: Restart systemd-resolved service
  ansible.builtin.systemd:
    name: systemd-resolved
    state: restarted
  listen: restart systemd-resolved

- name: Restart systemd-timesyncd service
  ansible.builtin.systemd:
    name: systemd-timesyncd
    state: restarted
  listen: Restart systemd-timesyncd

- name: Restart cpufrequtils service
  ansible.builtin.systemd:
    name: cpufrequtils
    state: restarted
  listen: Restart cpufrequtils
  ignore_errors: true
